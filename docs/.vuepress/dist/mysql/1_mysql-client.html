<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.25">
    <title>1. 使用 Mysql 客户端 | 笔记@小有记</title><meta name="description" content="">
    <link rel="preload" href="/assets/js/runtime~app.ce6e78a5.js" as="script"><link rel="preload" href="/assets/css/styles.c2dbe51e.css" as="style"><link rel="preload" href="/assets/js/2968.6fb6be6b.js" as="script"><link rel="preload" href="/assets/js/app.21ffca0f.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.c2dbe51e.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/images/logo.png" alt="笔记@小有记"><span class="site-name can-hide">笔记@小有记</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/ops/" class="nav-link" aria-label="运维"><!--[--><!--]--> 运维 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/os/" class="nav-link" aria-label="系统"><!--[--><!--]--> 系统 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/nginx/" class="nav-link" aria-label="Nginx"><!--[--><!--]--> Nginx <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/mysql/" class="nav-link router-link-active" aria-label="Mysql"><!--[--><!--]--> Mysql <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/javascript/" class="nav-link" aria-label="前端"><!--[--><!--]--> 前端 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/ops/" class="nav-link" aria-label="运维"><!--[--><!--]--> 运维 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/os/" class="nav-link" aria-label="系统"><!--[--><!--]--> 系统 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/nginx/" class="nav-link" aria-label="Nginx"><!--[--><!--]--> Nginx <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/mysql/" class="nav-link router-link-active" aria-label="Mysql"><!--[--><!--]--> Mysql <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/javascript/" class="nav-link" aria-label="前端"><!--[--><!--]--> 前端 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item active">Mysql</p><ul class=""><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="1. 使用 Mysql 客户端"><!--[--><!--]--> 1. 使用 Mysql 客户端 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-1-建立mysql-用户账号" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.1 建立mysql 用户账号"><!--[--><!--]--> 1.1 建立mysql 用户账号 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-2-创建数据库和样表" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.2 创建数据库和样表"><!--[--><!--]--> 1.2 创建数据库和样表 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-3-启动和停止-mysql" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.3 启动和停止 MySQL"><!--[--><!--]--> 1.3 启动和停止 MySQL <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-4-使用可选项文件来指定链接" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.4 使用可选项文件来指定链接"><!--[--><!--]--> 1.4 使用可选项文件来指定链接 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-5-保护选项文件不被其他用户读取" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.5 保护选项文件不被其他用户读取"><!--[--><!--]--> 1.5 保护选项文件不被其他用户读取 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-6-混合使用命令行参数和选项文件参数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.6 混合使用命令行参数和选项文件参数"><!--[--><!--]--> 1.6 混合使用命令行参数和选项文件参数 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-7-找不到-mysql-应该怎么做" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.7 找不到 mysql 应该怎么做"><!--[--><!--]--> 1.7 找不到 mysql 应该怎么做 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-8-发起-sql-语句" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.8 发起 sql 语句"><!--[--><!--]--> 1.8 发起 sql 语句 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-9-从文件中读取语句" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.9 从文件中读取语句"><!--[--><!--]--> 1.9 从文件中读取语句 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-10-打印错误" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.10 打印错误"><!--[--><!--]--> 1.10 打印错误 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-11-让mysql-读取其他程序的-数据" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.11 让mysql 读取其他程序的 数据"><!--[--><!--]--> 1.11 让mysql 读取其他程序的 数据 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-12-一行输入所有-sql" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.12 一行输入所有 sql"><!--[--><!--]--> 1.12 一行输入所有 sql <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-13-预防查询输出超出屏幕范围" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.13 预防查询输出超出屏幕范围"><!--[--><!--]--> 1.13 预防查询输出超出屏幕范围 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-14-查询结果输出" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.14 查询结果输出"><!--[--><!--]--> 1.14 查询结果输出 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-15-查询结果二次转换" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.15 查询结果二次转换"><!--[--><!--]--> 1.15 查询结果二次转换 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-16-使长输出行更具可读性" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.16 使长输出行更具可读性"><!--[--><!--]--> 1.16 使长输出行更具可读性 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-17-冗长输出和简介输出" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.17 冗长输出和简介输出"><!--[--><!--]--> 1.17 冗长输出和简介输出 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-18-记录操作步骤" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.18 记录操作步骤"><!--[--><!--]--> 1.18 记录操作步骤 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-19-用户自定义变量" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.19 用户自定义变量"><!--[--><!--]--> 1.19 用户自定义变量 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-20-mysql-数学函数" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.20 mysql 数学函数"><!--[--><!--]--> 1.20 mysql 数学函数 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/mysql/1_mysql-client.html#_1-21-shell-脚本中使用-mysql" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1.21 shell 脚本中使用 mysql"><!--[--><!--]--> 1.21 shell 脚本中使用 mysql <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/mysql/2_query.html" class="nav-link sidebar-item" aria-label="2. 从表中查询数据"><!--[--><!--]--> 2. 从表中查询数据 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/mysql/3_table.html" class="nav-link sidebar-item" aria-label="4. 表管理"><!--[--><!--]--> 4. 表管理 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/mysql/4_string.html" class="nav-link sidebar-item" aria-label="4. 与字符串共舞"><!--[--><!--]--> 4. 与字符串共舞 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/mysql/5_datetime.html" class="nav-link sidebar-item" aria-label="5. 使用日期和时间"><!--[--><!--]--> 5. 使用日期和时间 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/mysql/6_group.html" class="nav-link sidebar-item" aria-label="/mysql/6_group.md"><!--[--><!--]--> /mysql/6_group.md <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/mysql/7_export.html" class="nav-link sidebar-item" aria-label="数据导入导出"><!--[--><!--]--> 数据导入导出 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="_1-使用-mysql-客户端" tabindex="-1"><a class="header-anchor" href="#_1-使用-mysql-客户端" aria-hidden="true">#</a> 1. 使用 Mysql 客户端</h1><h3 id="_1-1-建立mysql-用户账号" tabindex="-1"><a class="header-anchor" href="#_1-1-建立mysql-用户账号" aria-hidden="true">#</a> 1.1 建立mysql 用户账号</h3><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 创建用户</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">&#39;cbuser&#39;</span><span class="token variable">@&#39;%&#39;</span> IDENTIFIED <span class="token keyword">WITH</span> mysql_native_password <span class="token keyword">AS</span> <span class="token string">&#39;cbpass&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">&#39;remote&#39;</span><span class="token variable">@&#39;%&#39;</span> <span class="token keyword">REQUIRE</span> NONE <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span> MAX_QUERIES_PER_HOUR <span class="token number">0</span> MAX_CONNECTIONS_PER_HOUR <span class="token number">0</span> MAX_UPDATES_PER_HOUR <span class="token number">0</span> MAX_USER_CONNECTIONS <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token punctuation">`</span><span class="token number">1</span>dailian\_v2<span class="token punctuation">`</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">&#39;remote&#39;</span><span class="token variable">@&#39;%&#39;</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span>
FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>

<span class="token comment"># 创建用户并授权</span>
<span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">ON</span> daniu<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">&#39;cbuser&#39;</span> <span class="token variable">@&#39;localhost&#39;</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">&#39;cbpass&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_1-2-创建数据库和样表" tabindex="-1"><a class="header-anchor" href="#_1-2-创建数据库和样表" aria-hidden="true">#</a> 1.2 创建数据库和样表</h3><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> cookbook<span class="token punctuation">;</span>
<span class="token keyword">USE</span> cookbook<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> limbs <span class="token punctuation">(</span> thing <span class="token keyword">VARCHAR</span> <span class="token punctuation">(</span> <span class="token number">20</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> legs <span class="token keyword">INT</span><span class="token punctuation">,</span> arms <span class="token keyword">INT</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> limbs <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">&#39;human&#39;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> limbs<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_1-3-启动和停止-mysql" tabindex="-1"><a class="header-anchor" href="#_1-3-启动和停止-mysql" aria-hidden="true">#</a> 1.3 启动和停止 MySQL</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># 启动
$ mysql -h host -p -u cbuser

# 导出
$ mysqldump -h localhost -p -u cbuser cookbook &gt; cookbook.sql

# 服务器维护
$ mysqladmin -p -uroot shutdown
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_1-4-使用可选项文件来指定链接" tabindex="-1"><a class="header-anchor" href="#_1-4-使用可选项文件来指定链接" aria-hidden="true">#</a> 1.4 使用可选项文件来指定链接</h3><p>my.ini / my.cnf 可以进行相应的配置</p><ul><li>使用组的方式来组织数据</li><li>只允许使用选项的长格式</li><li><code>=</code> 前后允许存在空格</li><li>选项没有值, 可以略去 =value 部分</li><li>如果选项值中包含空格以及其他特殊符号, 可以使用 引号(单引号/双引号) 将数值包裹起来</li><li>不需要某行则绿区即可</li><li>文件中可以定义多个组</li><li>多次出现, 最后出现的拥有最高优先级</li><li><code>#</code>, <code>;</code> 开头的数据会被忽略</li></ul><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">client</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">host</span><span class="token punctuation">=</span><span class="token value attr-value">localhost</span>
<span class="token comment">;user=root</span>

<span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">mysql</span><span class="token punctuation">]</span></span>
skip-auto-rehash
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_1-5-保护选项文件不被其他用户读取" tabindex="-1"><a class="header-anchor" href="#_1-5-保护选项文件不被其他用户读取" aria-hidden="true">#</a> 1.5 保护选项文件不被其他用户读取</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">chmod</span> <span class="token number">600</span> my.cnf
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="_1-6-混合使用命令行参数和选项文件参数" tabindex="-1"><a class="header-anchor" href="#_1-6-混合使用命令行参数和选项文件参数" aria-hidden="true">#</a> 1.6 混合使用命令行参数和选项文件参数</h3><p>命令行参数的优先级比选项文件中参数优先级高</p><h3 id="_1-7-找不到-mysql-应该怎么做" tabindex="-1"><a class="header-anchor" href="#_1-7-找不到-mysql-应该怎么做" aria-hidden="true">#</a> 1.7 找不到 mysql 应该怎么做</h3><p>将 mysql 安装目录放到环境变量中.</p><h3 id="_1-8-发起-sql-语句" tabindex="-1"><a class="header-anchor" href="#_1-8-发起-sql-语句" aria-hidden="true">#</a> 1.8 发起 sql 语句</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>;     # 作为末尾输入
\g    # 作为结束替代输入  &#39;\go&#39;
\c    # 作为取消输入     &#39;\cancel&#39;
&quot;&gt;    # 需要输入 双引号 来结束
&#39;&gt;    # 需要输入 单引号 来结束
/*&gt;   # 需要输入 */ 来结束
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_1-9-从文件中读取语句" tabindex="-1"><a class="header-anchor" href="#_1-9-从文件中读取语句" aria-hidden="true">#</a> 1.9 从文件中读取语句</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ mysql cookbook &lt; filename.sql
$ mysql -uroot -p
$ use cookbook
$ source filename.sql
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_1-10-打印错误" tabindex="-1"><a class="header-anchor" href="#_1-10-打印错误" aria-hidden="true">#</a> 1.10 打印错误</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ perror 24
OS error code  24:  Too many open files
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_1-11-让mysql-读取其他程序的-数据" tabindex="-1"><a class="header-anchor" href="#_1-11-让mysql-读取其他程序的-数据" aria-hidden="true">#</a> 1.11 让mysql 读取其他程序的 数据</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># 从文件读取sql
$ mysql cookbook &lt; limbs.sql

# 另外一种方法的文件读取
$ cat limbs.sql | mysql cookbook

# 跨境传输数据
$ mysqldump cookbook | mysql -h other.host.com cookbook

# 生成数据
$ gen-test-data.sh | mysql cookbook
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_1-12-一行输入所有-sql" tabindex="-1"><a class="header-anchor" href="#_1-12-一行输入所有-sql" aria-hidden="true">#</a> 1.12 一行输入所有 sql</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ mysql -uroot -e &quot;select count(*) from mk_pam_account&quot; daniu

# 多条数据
$ mysql -uroot -e &quot;select count(*) from mk_pam_account;select now()&quot; daniu
+----------+
| count(*) |
+----------+
|     2342 |
+----------+
+---------------------+
| now()               |
+---------------------+
| 2019-04-10 23:44:49 |
+---------------------+
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_1-13-预防查询输出超出屏幕范围" tabindex="-1"><a class="header-anchor" href="#_1-13-预防查询输出超出屏幕范围" aria-hidden="true">#</a> 1.13 预防查询输出超出屏幕范围</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># 指定 --pager 使其每次都显示一行输出
$ mysql -uroot --pager=/usr/bin/less

# 无参数代表使用系统默认分页
$ mysql -uroot --pager

# mysql 中使用分页
# 设置默认分页
mysql&gt; \P 

# 设置指定分页
mysql&gt; \P /usr/bin/less

# 恢复基本输出
mysql&gt; \n
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_1-14-查询结果输出" tabindex="-1"><a class="header-anchor" href="#_1-14-查询结果输出" aria-hidden="true">#</a> 1.14 查询结果输出</h3><p><strong>交互模式</strong> 交互模式下输出的是表格</p><p><strong>非交互模式</strong> 输出的是以制表符分隔的数据体</p><p><code>-t</code> or <code>--table</code> 如果输出格式强制使用 table 表格输出可以携带参数 <code>-B</code> or <code>--batch</code> 如果输出格式强制使用批量(定界符)输出, 可以使用 <code>-H</code> or <code>--html</code> 生成 html 格式 <code>-X</code> or <code>--xml</code> 使用 XML 格式输出 <code>-ss</code> or <code>--skip-column-names</code> 不在查询中输出包含列头部</p><h3 id="_1-15-查询结果二次转换" tabindex="-1"><a class="header-anchor" href="#_1-15-查询结果二次转换" aria-hidden="true">#</a> 1.15 查询结果二次转换</h3><p>如果查询结果并不能按照我们的期望输出, 可以使用 <code>sed</code>, <code>tr</code> 来进行二次转换</p><h3 id="_1-16-使长输出行更具可读性" tabindex="-1"><a class="header-anchor" href="#_1-16-使长输出行更具可读性" aria-hidden="true">#</a> 1.16 使长输出行更具可读性</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>mysql&gt; show full columns from limbs\G
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><code>-E</code> or <code>--vertical</code> 进行垂直输出</p><h3 id="_1-17-冗长输出和简介输出" tabindex="-1"><a class="header-anchor" href="#_1-17-冗长输出和简介输出" aria-hidden="true">#</a> 1.17 冗长输出和简介输出</h3><p><code>-v</code> or <code>-vv</code> or <code>-vvv</code> 冗长输出 <code>-s</code> or <code>-ss</code> or <code>-sss</code> 进行简洁输出</p><h3 id="_1-18-记录操作步骤" tabindex="-1"><a class="header-anchor" href="#_1-18-记录操作步骤" aria-hidden="true">#</a> 1.18 记录操作步骤</h3><p><code>-tee</code> or <code>\T</code> or <code>\t</code> 进行脚本记录的输出, 这些输出可供记录并且可以用作批处理文件</p><h3 id="_1-19-用户自定义变量" tabindex="-1"><a class="header-anchor" href="#_1-19-用户自定义变量" aria-hidden="true">#</a> 1.19 用户自定义变量</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># 从执行过程中获取值
mysql &gt; select @id:=id from libms;
mysql &gt; select * from abcolumsn where id = @id;

# 设置值使用 set
mysql &gt; set @sum = 4+7;
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_1-20-mysql-数学函数" tabindex="-1"><a class="header-anchor" href="#_1-20-mysql-数学函数" aria-hidden="true">#</a> 1.20 mysql 数学函数</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>select 20/sqrt(64);
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="_1-21-shell-脚本中使用-mysql" tabindex="-1"><a class="header-anchor" href="#_1-21-shell-脚本中使用-mysql" aria-hidden="true">#</a> 1.21 shell 脚本中使用 mysql</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># 多行文本的输入并且支持变量
mysql cookbook &lt;&lt;&lt; INPUT
    select * from $1
INPUT
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">2021/8/24 下午10:05:20</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: zhaody901@126.com">duoli</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/mysql/2_query.html" class="nav-link" aria-label="2. 从表中查询数据"><!--[--><!--]--> 2. 从表中查询数据 <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.ce6e78a5.js" defer></script><script src="/assets/js/2968.6fb6be6b.js" defer></script><script src="/assets/js/app.21ffca0f.js" defer></script>
  </body>
</html>
