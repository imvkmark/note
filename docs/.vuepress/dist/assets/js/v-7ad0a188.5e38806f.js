"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9859],{6553:(e,n,s)=>{s.r(n),s.d(n,{data:()=>t});const t={key:"v-7ad0a188",path:"/os/linux/ssh-login-slow-at-pledge.html",title:"ssh 登录慢，卡顿在 pledge: network 之后",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[],filePathRelative:"os/linux/ssh-login-slow-at-pledge.md",git:{updatedTime:1629648513e3,contributors:[{name:"duoli",email:"zhaody901@126.com",commits:1}]}}},7225:(e,n,s)=>{s.r(n),s.d(n,{default:()=>x});var t=s(6252),l=s(4416);const a=(0,t._)("h1",{id:"ssh-登录慢-卡顿在-pledge-network-之后",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#ssh-登录慢-卡顿在-pledge-network-之后","aria-hidden":"true"},"#"),(0,t.Uk)(" ssh 登录慢，卡顿在 pledge: network 之后")],-1),r=(0,t._)("p",null,"当 ssh 登录缓慢的时候我们需要 使用",-1),o=(0,t._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,t._)("pre",{class:"language-text"},[(0,t._)("code",null,"$ ssh -v user@host\n")]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br")])],-1),i=(0,t._)("p",null,"来查看问题出现的原因, 根据出现的问题来进行处理",-1),u=(0,t._)("p",null,[(0,t.Uk)("我这里出现的问题是在 "),(0,t._)("code",null,"pledge: network"),(0,t.Uk)(" 之后出现卡顿")],-1),d=(0,t._)("p",null,"处理结果",-1),c=(0,t._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,t._)("pre",{class:"language-text"},[(0,t._)("code",null,'$ echo "" > /var/log/btmp\n')]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br")])],-1),p=(0,t._)("p",null,"主要原因是 22 端口对外暴露，导致大量的爆破扫描，因此导致 btmp 这个文件巨大",-1),_=(0,t.Uk)("参考地址 : "),g={href:"https://serverfault.com/questions/792486/ssh-connection-takes-forever-to-initiate-stuck-at-pledge-network",target:"_blank",rel:"noopener noreferrer"},h=(0,t.Uk)("ssh connection takes forever to initiate, stuck at “pledge: network”"),m=(0,t._)("p",null,[(0,t._)("img",{src:l,alt:"-w666"})],-1),k=(0,t._)("p",null,"我们可以通过如下命令查看恶意ip试图登录次数：",-1),b=(0,t._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,t._)("pre",{class:"language-text"},[(0,t._)("code",null,"lastb | awk ‘{ print $3}’ | sort | uniq -c | sort -n\n")]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br")])],-1),x={render:function(e,n){const s=(0,t.up)("OutboundLink");return(0,t.wg)(),(0,t.iD)(t.HY,null,[a,r,o,i,u,d,c,p,(0,t._)("p",null,[_,(0,t._)("a",g,[h,(0,t.Wm)(s)])]),m,k,b],64)}}},4416:(e,n,s)=>{e.exports=s.p+"assets/img/15988540906012.be0a556b.jpg"}}]);