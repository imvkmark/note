"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6276],{3731:(n,e,a)=>{a.r(e),a.d(e,{data:()=>s});const s={key:"v-da45d224",path:"/mysql/5_datetime.html",title:"5. 使用日期和时间",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:3,title:"6.1 选择合适的日期或者时间变量类型",slug:"_6-1-选择合适的日期或者时间变量类型",children:[]},{level:3,title:"6.3 客户端",slug:"_6-3-客户端",children:[]},{level:3,title:"6.4 Timestamp 的自动更新",slug:"_6-4-timestamp-的自动更新",children:[]},{level:3,title:"6.5 日期分离函数",slug:"_6-5-日期分离函数",children:[]},{level:3,title:"6.6 日期组成函数",slug:"_6-6-日期组成函数",children:[]},{level:3,title:"6.7 计算时间间隔",slug:"_6-7-计算时间间隔",children:[]},{level:3,title:"6.8 时间计算",slug:"_6-8-时间计算",children:[]}],filePathRelative:"mysql/5_datetime.md",git:{updatedTime:162981392e4,contributors:[{name:"duoli",email:"zhaody901@126.com",commits:1}]}}},5593:(n,e,a)=>{a.r(e),a.d(e,{default:()=>t});const s=(0,a(6252).uE)('<h1 id="_5-使用日期和时间" tabindex="-1"><a class="header-anchor" href="#_5-使用日期和时间" aria-hidden="true">#</a> 5. 使用日期和时间</h1><h3 id="_6-1-选择合适的日期或者时间变量类型" tabindex="-1"><a class="header-anchor" href="#_6-1-选择合适的日期或者时间变量类型" aria-hidden="true">#</a> 6.1 选择合适的日期或者时间变量类型</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>CCYY-MM-DD   : 1000-01-01 - 9999-12-31\nhh:mm:ss     : -838:59:59 - 838:59:59\nDateTime(CCYY-MM-DD hh:mm:ss)\n    : 1000-01-01 00:00:00 - 9999-12-31 23:59:59\nTimestamp\n    : 1970-01-01 00:00:00 - 2037-12-31 23:59:59\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_6-2-mysql-日期函数" tabindex="-1"><a class="header-anchor" href="#_6-2-mysql-日期函数" aria-hidden="true">#</a> 6.2 MySQL 日期函数</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># 进行日期的提取\nStr_To_Date(&#39;May 13, 2007&#39;, &#39;%M %D, %Y&#39;)\n\n# 日期格式化\nDate_Format(date, &#39;%M %D, %Y&#39;);\n\n# 时间格式化\nTime_Format(time, &#39;%T&#39;);\n\n# 转换时区\nConvert_Tz() \n\n# 当前日期\nCurDate()\n\n# 当前时间\nCurTime()\n\n# 当前日期时间\nNow()\n\n# Utc \nUtc_Date(), Utc_Time(), Utc_Timestamp()\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><table><thead><tr><th>格式化字符</th><th>含义</th></tr></thead><tbody><tr><td>%Y</td><td>4位年份</td></tr><tr><td>%y</td><td>2位年份</td></tr><tr><td>%M</td><td>完整的月份名称(January-December)</td></tr><tr><td>%b</td><td>月份的前三个字母(Jan-Dec)</td></tr><tr><td>%m</td><td>数字月份, 带有前缀 0 (01-12)</td></tr><tr><td>%c</td><td>数字月份, 无前缀(1-12)</td></tr><tr><td>%d</td><td>数字日期, 带有前缀 0 (01-31)</td></tr><tr><td>%e</td><td>数字日期, 无前缀 (1, 31)</td></tr><tr><td>%W</td><td>工作日名称 (Sunday - Saturday)</td></tr><tr><td>%r</td><td>时间, 12 小时, 以 AM - PM 结尾</td></tr><tr><td>%T</td><td>时间, 24 小时制</td></tr><tr><td>%H</td><td>小时, 带有前缀0 (00-23)</td></tr><tr><td>%i</td><td>分钟, 带有0(00-59)</td></tr><tr><td>%s</td><td>秒 (00-59)</td></tr><tr><td>%%</td><td>&#39;%&#39; 文字字符</td></tr></tbody></table><h3 id="_6-3-客户端" tabindex="-1"><a class="header-anchor" href="#_6-3-客户端" aria-hidden="true">#</a> 6.3 客户端</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># 设置默认时区\nmysqld --default-time-zone \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_6-4-timestamp-的自动更新" tabindex="-1"><a class="header-anchor" href="#_6-4-timestamp-的自动更新" aria-hidden="true">#</a> 6.4 Timestamp 的自动更新</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># 根据设定来更新当前时间戳 + 更新当前时间戳\nCreate Table `t` (\n    ts timestamp Not Null Default Current_Timestamp\n       On Update Current_Timestamp\n)\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_6-5-日期分离函数" tabindex="-1"><a class="header-anchor" href="#_6-5-日期分离函数" aria-hidden="true">#</a> 6.5 日期分离函数</h3><table><thead><tr><th>函数</th><th>返回值</th></tr></thead><tbody><tr><td>Year()</td><td>年</td></tr><tr><td>Month()</td><td>月</td></tr><tr><td>MonthName()</td><td>月完整名称 (January-December)</td></tr><tr><td>DayOfMonth()</td><td>1...31</td></tr><tr><td>DayName()</td><td>一周中的天数 (Sunday-Saturday)</td></tr><tr><td>DayOfWeek()</td><td>1-7, 对应 (Sunday - Saturday)</td></tr><tr><td>WeekDay()</td><td>0-6, 对应 (Monday - Sunday)</td></tr><tr><td>DayOfYear()</td><td>一年中的天数值 (1...366)</td></tr><tr><td>Hour()</td><td>小时数</td></tr><tr><td>Minute()</td><td>分钟数</td></tr><tr><td>Second()</td><td>秒数</td></tr></tbody></table><h3 id="_6-6-日期组成函数" tabindex="-1"><a class="header-anchor" href="#_6-6-日期组成函数" aria-hidden="true">#</a> 6.6 日期组成函数</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># 合成时间\nMakeTime(10, 30, 30)\n\n# 合成日期\nMakeDate(2007, 60)\n\n# 时间 + 秒的转换\nTime_To_Sec()\nSec_To_Time()\n\n# 时间 + 日期的转换\nTo_Days()\nFrom_Days()\n\n# 时间戳转换\nUnix_TimeStamp()\nFrom_UnixTime()\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_6-7-计算时间间隔" tabindex="-1"><a class="header-anchor" href="#_6-7-计算时间间隔" aria-hidden="true">#</a> 6.7 计算时间间隔</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># 日期间隔\nDateDiff(date1, date2)\n\n# 时间间隔\nTimeDiff(time1, time2)\n\n# 时间戳间隔\nTimestampDiff(Unit, dt1, dt2)\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_6-8-时间计算" tabindex="-1"><a class="header-anchor" href="#_6-8-时间计算" aria-hidden="true">#</a> 6.8 时间计算</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># 时间加法\nAddTime()\n\n# 时间/日期时间 相加\nTimestamp()\n\nDateAdd(d, interval)\nDateSub(d, interval)\n\nd + Interval val unit\nd - Interval val unit\n\n# 计算生日\nTimestampDiff(unit, birth, current)\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div>',18),t={render:function(n,e){return s}}}}]);