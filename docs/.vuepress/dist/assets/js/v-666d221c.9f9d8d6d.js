"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[428],{9946:(n,a,s)=>{s.r(a),s.d(a,{data:()=>e});const e={key:"v-666d221c",path:"/javascript/react/faq.html",title:"React 常见问题",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"1. Uncaught Error: Invariant failed",slug:"_1-uncaught-error-invariant-failed",children:[]},{level:2,title:"2. 加载自定义 Url",slug:"_2-加载自定义-url",children:[]},{level:2,title:"3. 关掉线上 map 生成",slug:"_3-关掉线上-map-生成",children:[]},{level:2,title:"4. uncaught at check call: argument [object Promise] is not a function",slug:"_4-uncaught-at-check-call-argument-object-promise-is-not-a-function",children:[]}],filePathRelative:"javascript/react/faq.md",git:{updatedTime:1629648513e3,contributors:[{name:"duoli",email:"zhaody901@126.com",commits:1}]}}},3905:(n,a,s)=>{s.r(a),s.d(a,{default:()=>q});var e=s(6252),t=s(3561),l=s(8598);const r=(0,e._)("h1",{id:"react-常见问题",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#react-常见问题","aria-hidden":"true"},"#"),(0,e.Uk)(" React 常见问题")],-1),c=(0,e._)("h2",{id:"_1-uncaught-error-invariant-failed",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_1-uncaught-error-invariant-failed","aria-hidden":"true"},"#"),(0,e.Uk)(" 1. Uncaught Error: Invariant failed")],-1),o=(0,e._)("blockquote",null,[(0,e._)("p",null,[(0,e.Uk)("Uncaught Error: Invariant failed , You should not use "),(0,e._)("code",null,"<Route>"),(0,e.Uk)(" outside a "),(0,e._)("code",null,"<Router>"),(0,e.Uk)(" 参考地址 : https://www.freeformatter.com/url-parser-query-string-splitter.html")])],-1),i=(0,e._)("p",null,"出现原因: 系统中存在两个实例, 例如",-1),p=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"language-javascript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("Route"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"react-router"'),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("Switch"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"react-router-dom"'),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token comment"},"// 应该修改为"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("Switch"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" Route"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"react-router-dom"'),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br")])],-1),u=(0,e._)("h2",{id:"_2-加载自定义-url",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_2-加载自定义-url","aria-hidden":"true"},"#"),(0,e.Uk)(" 2. 加载自定义 Url")],-1),_=(0,e._)("p",null,"将加载的 URL 放到 div 中, 从而实现远程地址的加载来加载变量",-1),k=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"language-javascript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(" postscribe "),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'postscribe'"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token keyword"},"let"),(0,e.Uk)(" script "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(" serverUrl "),(0,e._)("span",{class:"token operator"},"+"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'/'"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"+"),(0,e.Uk)(" apiUrl"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("pamWechatConfig "),(0,e._)("span",{class:"token operator"},"+"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'?url='"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"+"),(0,e.Uk)(" window"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("location"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("href"),(0,e._)("span",{class:"token operator"},"+"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'&type=base'"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token function"},"postscribe"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'#J_wxAuth'"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'<script src=\"'"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"+"),(0,e.Uk)(" script "),(0,e._)("span",{class:"token operator"},"+"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},"'\"><\/script>'"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token function-variable function"},"error"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},"e"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n        console"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"log"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("e"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token function-variable function"},"done"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},"e"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n        wx"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"config"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("window"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("wxAuthConfig"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br")])],-1),d=(0,e._)("h2",{id:"_3-关掉线上-map-生成",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_3-关掉线上-map-生成","aria-hidden":"true"},"#"),(0,e.Uk)(" 3. 关掉线上 map 生成")],-1),b=(0,e.Uk)("参考文章 : "),m={href:"https://blog.csdn.net/hahahhahahahha123456/article/details/102901643",target:"_blank",rel:"noopener noreferrer"},U=(0,e.Uk)("什么时候create-react-app会混淆或缩小代码？"),h=(0,e._)("p",null,"如果有 map 生成, 则许多源码对外来讲便是可视化的. 例如之前的一个代练项目",-1),g=(0,e._)("p",null,[(0,e._)("img",{src:t,alt:""})],-1),f=(0,e._)("p",null,"项目代码一览无余, 所以对于项目上线打包的时候必须要关闭源码 map",-1),v=(0,e._)("p",null,[(0,e.Uk)("对于 "),(0,e._)("code",null,"cra"),(0,e.Uk)(" 项目, 使用了 "),(0,e._)("code",null,"react-app-rewired"),(0,e.Uk)(", 则可以在 "),(0,e._)("code",null,"config-overrides.js"),(0,e.Uk)(" 中增加如下相关配置, 来关闭 sources")],-1),w=(0,e._)("div",{class:"language-diff ext-diff line-numbers-mode"},[(0,e._)("pre",{class:"language-diff"},[(0,e._)("code",null,[(0,e.Uk)("const {override, addLessLoader, fixBabelImports, addWebpackAlias} = require('customize-cra');\nconst alias = require('./alias');\n\n"),(0,e._)("span",{class:"token inserted-sign inserted"},[(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},' process.env.GENERATE_SOURCEMAP = "false";\n')]),(0,e.Uk)("\nfunction myOverrides(config) {\n\t// do stuff to config\n\treturn config\n}\n\nmodule.exports = override(\n\tmyOverrides,\n\taddLessLoader({\n\t\tjavascriptEnabled : true\n\t}),\n\tfixBabelImports('import', {\n\t\t\tlibraryName : 'antd-mobile',\n\t\t\tstyle : true\n\t\t}\n\t),\n\taddWebpackAlias(alias.resolve.alias)\n)\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"20"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"21"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"22"),(0,e._)("br")])],-1),x=(0,e._)("p",null,[(0,e._)("img",{src:l,alt:""})],-1),y=(0,e._)("p",null,"关掉 map 之后则看起来放心多了",-1),j=(0,e._)("h2",{id:"_4-uncaught-at-check-call-argument-object-promise-is-not-a-function",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_4-uncaught-at-check-call-argument-object-promise-is-not-a-function","aria-hidden":"true"},"#"),(0,e.Uk)(" 4. uncaught at check call: argument [object Promise] is not a function")],-1),R=(0,e._)("p",null,[(0,e.Uk)("主要原因在 "),(0,e._)("code",null,"yield call(addGroup(payload));"),(0,e.Uk)(" 的使用姿势问题，对于需要传递参数的去哪个，不能直接这么干，应该改为")],-1),E=(0,e._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,e._)("pre",{class:"language-text"},[(0,e._)("code",null,"yield call(addGroup, payload);\n")]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br")])],-1),q={render:function(n,a){const s=(0,e.up)("OutboundLink");return(0,e.wg)(),(0,e.iD)(e.HY,null,[r,c,o,i,p,u,_,k,d,(0,e._)("p",null,[b,(0,e._)("a",m,[U,(0,e.Wm)(s)])]),h,g,f,v,w,x,y,j,R,E],64)}}},3561:(n,a,s)=>{n.exports=s.p+"assets/img/232243.fd9c15f7.png"},8598:(n,a,s)=>{n.exports=s.p+"assets/img/233606.bf619a1b.png"}}]);