"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[704],{4230:(e,n,s)=>{s.r(n),s.d(n,{data:()=>a});const a={key:"v-83ceb0e2",path:"/os/centos/modify-host.html",title:"[转] 如何在CentOS 7上修改主机名",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"查看主机名相关的设置",slug:"查看主机名相关的设置",children:[]},{level:2,title:"查看静态、瞬态或灵活主机名",slug:"查看静态、瞬态或灵活主机名",children:[]},{level:2,title:"修改主机名",slug:"修改主机名",children:[]}],filePathRelative:"os/centos/modify-host.md",git:{updatedTime:1629648513e3,contributors:[{name:"duoli",email:"zhaody901@126.com",commits:1}]}}},6273:(e,n,s)=>{s.r(n),s.d(n,{default:()=>v});var a=s(6252);const l=(0,a._)("h1",{id:"转-如何在centos-7上修改主机名",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#转-如何在centos-7上修改主机名","aria-hidden":"true"},"#"),(0,a.Uk)(" [转] 如何在CentOS 7上修改主机名")],-1),t=(0,a.Uk)("原文地址 : "),r={href:"https://www.jianshu.com/p/39d7000dfa47",target:"_blank",rel:"noopener noreferrer"},c=(0,a.Uk)("如何在CentOS 7上修改主机名"),o=(0,a.Uk)(" 在CentOS中，有三种定义的主机名:静态的（static），瞬态的（transient），和灵活的（pretty）。"),i=(0,a._)("code",null,"静态",-1),p=(0,a.Uk)("主机名也称为内核主机名，是系统在启动时从/etc/hostname自动初始化的主机名。"),b=(0,a._)("code",null,"瞬态",-1),d=(0,a.Uk)("主机名是在系统运行时临时分配的主机名，例如，通过DHCP或mDNS服务器分配。静态主机名和瞬态主机名都遵从作为互联网域名同样的字符限制规则。而另一方面，"),m=(0,a._)("code",null,"灵活",-1),u=(0,a.Uk)("主机名则允许使用自由形式（包括特殊/空白字符）的主机名，以展示给终端用户（如server-a）。 在CentOS 7中，有个叫hostnamectl的命令行工具，它允许你查看或修改与主机名相关的配置。"),h=(0,a.uE)('<h2 id="查看主机名相关的设置" tabindex="-1"><a class="header-anchor" href="#查看主机名相关的设置" aria-hidden="true">#</a> 查看主机名相关的设置</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@localhost ~]# hostnamectl\n   Static hostname: localhost.localdomain\n         Icon name: computer-vm\n           Chassis: vm\n        Machine ID: 21ff9d4ebdd94e949b9fd6cbdb1926c0\n           Boot ID: 2a952e91c02841e3ae10de0d16dd3f01\n    Virtualization: kvm\n  Operating System: CentOS Linux 7 (Core)\n       CPE OS Name: cpe:/o:centos:centos:7\n            Kernel: Linux 3.10.0-327.el7.x86_64\n      Architecture: x86-64\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@localhost ~]# hostnamectl status\n   Static hostname: localhost.localdomain\n         Icon name: computer-vm\n           Chassis: vm\n        Machine ID: 21ff9d4ebdd94e949b9fd6cbdb1926c0\n           Boot ID: 2a952e91c02841e3ae10de0d16dd3f01\n    Virtualization: kvm\n  Operating System: CentOS Linux 7 (Core)\n       CPE OS Name: cpe:/o:centos:centos:7\n            Kernel: Linux 3.10.0-327.el7.x86_64\n      Architecture: x86-64\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="查看静态、瞬态或灵活主机名" tabindex="-1"><a class="header-anchor" href="#查看静态、瞬态或灵活主机名" aria-hidden="true">#</a> 查看静态、瞬态或灵活主机名</h2><p>只查看静态、瞬态或灵活主机名，分别使用<code>--static</code>，<code>--transient</code>或<code>--pretty</code>选项。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@localhost ~]# hostnamectl --static\nlocalhost.localdomain\n[root@localhost ~]# hostnamectl --transient\nlocalhost.localdomain\n[root@localhost ~]# hostnamectl --pretty\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="修改主机名" tabindex="-1"><a class="header-anchor" href="#修改主机名" aria-hidden="true">#</a> 修改主机名</h2><p>要同时修改所有三个主机名：静态、瞬态和灵活主机名：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@localhost ~]# hostnamectl set-hostname server-a\n[root@localhost ~]# hostnamectl --pretty\n[root@localhost ~]# hostnamectl --static\nserver-a\n[root@localhost ~]# hostnamectl --transient\nserver-a\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>就像上面展示的那样，在修改静态/瞬态主机名时，任何特殊字符或空白字符会被移除，而提供的参数中的任何大写字母会自动转化为小写。 一旦修改了静态主机名，<code>/etc/hostname</code> 将被自动更新。然而，<code>/etc/hosts</code> 不会更新以保存所做的修改，所以你每次在修改主机名后一定要手动更新<code>/etc/hosts</code>，之后再重启CentOS 7。否则系统再启动时会很慢。</p><p>手动更新<code>/etc/hosts</code></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>vim /etc/hosts\n#127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4\n127.0.0.1  server-a\n#::1         localhost localhost.localdomain localhost6 localhost6.localdomain6\n::1        server-a\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>重启CentOS 7 之后<code>（reboot -f ）</code>，</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@server-a ~]# hostname\nserver-a\n[root@server-a ~]# hostnamectl\n   Static hostname: server-a\n         Icon name: computer-vm\n           Chassis: vm\n        Machine ID: 21ff9d4ebdd94e949b9fd6cbdb1926c0\n           Boot ID: 2a952e91c02841e3ae10de0d16dd3f01\n    Virtualization: kvm\n  Operating System: CentOS Linux 7 (Core)\n       CPE OS Name: cpe:/o:centos:centos:7\n            Kernel: Linux 3.10.0-327.el7.x86_64\n      Architecture: x86-64\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>如果你只想修改特定的主机名（静态，瞬态或灵活），你可以使用<code>--static</code>，<code>--transient</code>或<code>--pretty</code>选项。例如，要永久修改主机名，你可以修改静态主机名：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@localhost ~]# hostnamectl --static set-hostname server-a\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>重启CentOS 7 之后（<code>reboot -f</code> ），</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@localhost ~]# hostnamectl --static\nserver-a\n[root@localhost ~]# hostnamectl --transient\nserver-a\n[root@localhost ~]# hostnamectl --pretty\nserver-a\n[root@localhost ~]# hostname\nserver-a\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>其实，你不必重启机器以激活永久主机名修改。上面的命令会立即修改内核主机名。 注销并重新登入后在命令行提示来观察新的静态主机名</p>',19),v={render:function(e,n){const s=(0,a.up)("OutboundLink");return(0,a.wg)(),(0,a.iD)(a.HY,null,[l,(0,a._)("p",null,[t,(0,a._)("a",r,[c,(0,a.Wm)(s)]),o,i,p,b,d,m,u]),h],64)}}}}]);