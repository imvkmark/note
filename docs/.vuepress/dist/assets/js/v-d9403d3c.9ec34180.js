"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7592],{1464:(e,l,n)=>{n.r(l),n.d(l,{data:()=>a});const a={key:"v-d9403d3c",path:"/os/mac/upgrade-bash.html",title:"[译] 在 macOS 上升级 Bash",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"macOS上的默认Bash版本",slug:"macos上的默认bash版本",children:[]},{level:2,title:"为什么要升级？",slug:"为什么要升级",children:[]},{level:2,title:"如何升级？",slug:"如何升级",children:[{level:3,title:"安装",slug:"安装",children:[]},{level:3,title:"白名单",slug:"白名单",children:[]},{level:3,title:"设置默认 Shell",slug:"设置默认-shell",children:[]}]},{level:2,title:"重要笔记",slug:"重要笔记",children:[{level:3,title:"脚本中的用法",slug:"脚本中的用法",children:[]},{level:3,title:"为什么不能用符号链接？",slug:"为什么不能用符号链接",children:[]}]},{level:2,title:"参考文献",slug:"参考文献",children:[]}],filePathRelative:"os/mac/upgrade-bash.md",git:{updatedTime:1629648513e3,contributors:[{name:"duoli",email:"zhaody901@126.com",commits:1}]}}},3258:(e,l,n)=>{n.r(l),n.d(l,{default:()=>Zl});var a=n(6252),s=n(9913);const r=(0,a._)("h1",{id:"译-在-macos-上升级-bash",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#译-在-macos-上升级-bash","aria-hidden":"true"},"#"),(0,a.Uk)(" [译] 在 macOS 上升级 Bash")],-1),t=(0,a.Uk)("机器翻译, 人工校对, 如有错误, 欢迎斧正 原文地址 : "),i={href:"https://itnext.io/upgrading-bash-on-macos-7138bd1066ba",target:"_blank",rel:"noopener noreferrer"},_=(0,a.Uk)("Upgrading Bash on macOS"),u=(0,a.Uk)(" 掘金: https://juejin.im/post/5e4d69c5518825497467f03d"),o=(0,a._)("p",null,[(0,a.Uk)("许多 macOS 用户不知道的一件事是，他们正在使用完全过时的 Bash shell 版本。所以，"),(0,a._)("strong",null,"强烈"),(0,a.Uk)(" 建议在 macOS 上使用较新版本的 Bash，因为它有很多可用的新功能。本文介绍了如何执行此操作。")],-1),h=(0,a._)("p",null,[(0,a._)("img",{src:s,alt:""})],-1),c=(0,a._)("h2",{id:"macos上的默认bash版本",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#macos上的默认bash版本","aria-hidden":"true"},"#"),(0,a.Uk)(" macOS上的默认Bash版本")],-1),b=(0,a._)("p",null,"要查看 macOS 中包含的 Bash 版本的是否已经过时，请执行以下命令：",-1),d=(0,a._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,a._)("pre",{class:"language-text"},[(0,a._)("code",null,"$ bash --version\nGNU bash，版本 3.2.57(1)-release (x86_64-apple-darwin19.0.0)\nCopyright (C) 2017 Free Software Foundation, Inc.\n许可证 GPLv3+: GNU GPL 许可证第三版或者更新版本 <http://gnu.org/licenses/gpl.html>\n\n本软件是自由软件，你可以自由地更改和重新发布。\n在法律许可的情况下特此明示，本软件不提供任何担保。\n")]),(0,a._)("div",{class:"line-numbers"},[(0,a._)("span",{class:"line-number"},"1"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"2"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"3"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"4"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"5"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"6"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"7"),(0,a._)("br")])],-1),p=(0,a.Uk)("如你所见，这是 "),m={href:"https://www.gnu.org/software/bash/",target:"_blank",rel:"noopener noreferrer"},g=(0,a.Uk)("GNU Bash"),k=(0,a.Uk)(),U=(0,a._)("strong",null,"3.2",-1),x=(0,a.Uk)(" 版，其日期为 "),f=(0,a._)("strong",null,"2007年",-1),v=(0,a.Uk)(" ！此版本的Bash包括在"),S=(0,a._)("strong",null,"所有",-1),w=(0,a.Uk)(" macOS版本中，甚至是最新版。"),B=(0,a.Uk)("苹果在其操作系统中包含如此旧版本的 Bash 的原因与 "),y=(0,a._)("strong",null,"许可有关",-1),P=(0,a.Uk)("。从4.0版本（3.2的后继版本）开始，Bash使用 "),W={href:"https://www.gnu.org/licenses/gpl.html",target:"_blank",rel:"noopener noreferrer"},O=(0,a.Uk)("GNU通用公共许可证v3（GPLv3）"),G=(0,a.Uk)("，Apple不(想)支持。你可以 "),I={href:"https://www.reddit.com/r/apple/comments/7v97ls/why_doesnt_apple_use_any_gpl_v3_unix_packages_in/",target:"_blank",rel:"noopener noreferrer"},N=(0,a.Uk)("在此处"),C=(0,a.Uk)(" 和 "),$={href:"http://meta.ath0.com/2012/02/05/apples-great-gpl-purge/",target:"_blank",rel:"noopener noreferrer"},A=(0,a.Uk)("此处"),L=(0,a.Uk)(" 找到有关此 "),T={href:"https://www.reddit.com/r/apple/comments/7v97ls/why_doesnt_apple_use_any_gpl_v3_unix_packages_in/",target:"_blank",rel:"noopener noreferrer"},F=(0,a.Uk)("问题"),H=(0,a.Uk)(" 的一些讨论。GNU Bash 的 3.2 版是 Apple 接受的带有 GPLv2 的最新版本，因此坚持使用这个版本。"),R=(0,a.Uk)("这意味着整个世界（例如Linux）都将使用 Bash 的新版本，而 macOS 用户则只能使用十年前的旧版本。在撰写本文时，GNU Bash的最新版本是5.0（请参阅 "),z={href:"https://tiswww.case.edu/php/chet/bash/bashtop.html#CurrentStatus",target:"_blank",rel:"noopener noreferrer"},j=(0,a.Uk)("此处"),E=(0,a.Uk)(" ），已于2019年1月发布。在本文中，我给出了将系统的默认 Shell 升级到 Bash 的最新版本的说明。"),V=(0,a._)("h2",{id:"为什么要升级",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#为什么要升级","aria-hidden":"true"},"#"),(0,a.Uk)(" 为什么要升级？")],-1),q=(0,a.Uk)("但如果 Bash 3.2 可以正常工作，为什么还要费心升级新版呢？就我个人而言，主要原因是 "),Y={href:"https://www.gnu.org/software/bash/manual/html_node/Programmable-Completion.html",target:"_blank",rel:"noopener noreferrer"},D=(0,a._)("strong",null,"编程补全",-1),X=(0,a.Uk)("。Bash 有个新特性是支持 特定命令的自动补全。你可能会使用自动补全功能来完成命令，文件名和变量，方法是先键入然后敲击 "),J=(0,a._)("em",null,"Tab键",-1),K=(0,a.Uk)(" 以自动完成当前词句（或两次敲击 "),M=(0,a._)("em",null,"Tab键",-1),Q=(0,a.Uk)(" 以获取所有可能补全的列表，如果有多个以上的话） ）。这是Bash的自动补全。"),Z=(0,a._)("p",null,[(0,a.Uk)("但是，"),(0,a._)("strong",null,"编程补全"),(0,a.Uk)(" 远不止于此，因为它允许依赖于上下文的特定于命令的完成。例如，想象一下，键入"),(0,a._)("code",null,"cmd -[tab][tab]"),(0,a.Uk)("，然后看到适用于该命令的所有选项的列表。或键入"),(0,a._)("code",null,"cmd host rm [tab][tab]"),(0,a.Uk)("然后查看某个配置文件中指定的所有“主机”的列表。"),(0,a._)("strong",null,"编程补全"),(0,a.Uk)(" 可以做到这一点。")],-1),ee=(0,a._)("p",null,[(0,a.Uk)("可编程补全逻辑（由命令的创建者）在完成规范中定义，通常以"),(0,a._)("strong",null,"完成脚本"),(0,a.Uk)("的形式定义。这些完成脚本必须在Shell中提供，以启用命令的完成功能。")],-1),le=(0,a._)("p",null,"问题在于，自3.2版以来，Bash 的可编程补全功能已得到扩展，并且大多数补全脚本都使用这些新功能。这意味着这些补全脚本在 Bash 3.2 上不起作用，这意味着如果你继续使用默认的macOS shell，则会错过许多命令的补全功能。",-1),ne=(0,a.Uk)("通过升级到较新的 Bash 版本，你可以使用这些补全脚本，这将非常有用。我写了整篇文章，称为"),ae={href:"https://medium.com/@weibeld/programmable-completion-for-bash-on-macos-f81a0103080b",target:"_blank",rel:"noopener noreferrer"},se=(0,a._)("strong",null,"macOS 上的 Bash 编程补全",-1),re=(0,a.Uk)("，其中介绍了升级到较新的Bash版本后要充分利用 macOS 上的可编程补全所需的全部知识。"),te=(0,a._)("h2",{id:"如何升级",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#如何升级","aria-hidden":"true"},"#"),(0,a.Uk)(" 如何升级？")],-1),ie=(0,a._)("p",null,"要将 macOS 系统的默认 Shell 升级到最新版本的 Bash，你必须做三件事：",-1),_e=(0,a._)("ol",null,[(0,a._)("li",null,[(0,a._)("strong",null,"安装最新版本的Bash")]),(0,a._)("li",null,[(0,a._)("strong",null,"将新的Bash Whitelist” 作为 login shell")]),(0,a._)("li",null,[(0,a._)("strong",null,"将新的Bash设置为 default shell")])],-1),ue=(0,a._)("p",null,"每个步骤都非常容易，如下所述。",-1),oe=(0,a._)("blockquote",null,[(0,a._)("p",null,"**注意：**以下说明不会更改 Bash 的旧版本，而是安装新版本并将其设置为默认版本。这两个版本将在你的系统上并存，但是你可以从此处忽略旧版本。")],-1),he=(0,a._)("h3",{id:"安装",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#安装","aria-hidden":"true"},"#"),(0,a.Uk)(" 安装")],-1),ce=(0,a.Uk)("我建议使用"),be={href:"https://brew.sh/",target:"_blank",rel:"noopener noreferrer"},de=(0,a.Uk)("Homebrew"),pe=(0,a.Uk)("安装最新版本的Bash："),me=(0,a._)("p",null,[(0,a._)("strong",null,"brew安装bash")],-1),ge=(0,a._)("p",null,"就是这样！",-1),ke=(0,a._)("p",null,"要验证安装，你可以检查系统上现在有两个版本的Bash：",-1),Ue=(0,a._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,a._)("pre",{class:"language-text"},[(0,a._)("code",null,"$ which -a bash\n/usr/local/bin/bash\n/bin/bash\n")]),(0,a._)("div",{class:"line-numbers"},[(0,a._)("span",{class:"line-number"},"1"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"2"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"3"),(0,a._)("br")])],-1),xe=(0,a._)("p",null,"第一个是新版本，第二个是旧版本：",-1),fe=(0,a._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,a._)("pre",{class:"language-text"},[(0,a._)("code",null,"$ /usr/local/bin/bash --version\nGNU bash, version 5.0.0(1)-release (x86_64-apple-darwin18.2.0)\nCopyright (C) 2019 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software; you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n$ /bin/bash --version\nGNU bash, version 3.2.57(1)-release (x86_64-apple-darwin18)\nCopyright (C) 2007 Free Software Foundation, Inc.\n")]),(0,a._)("div",{class:"line-numbers"},[(0,a._)("span",{class:"line-number"},"1"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"2"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"3"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"4"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"5"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"6"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"7"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"8"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"9"),(0,a._)("br")])],-1),ve=(0,a._)("p",null,[(0,a.Uk)("在"),(0,a._)("code",null,"PATH"),(0,a.Uk)("变量中, 默认的新版 "),(0,a._)("code",null,"/usr/local/bin"),(0,a.Uk)(" 目录的 Path 路径 会在 旧版本 "),(0,a._)("code",null,"/bin"),(0,a.Uk)(" 目录之前，因此，只需输入 "),(0,a._)("code",null,"bash"),(0,a.Uk)(" 即可使用新版")],-1),Se=(0,a._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,a._)("pre",{class:"language-text"},[(0,a._)("code",null,"$ bash --version\nGNU bash, version 5.0.0(1)-release (x86_64-apple-darwin18.2.0)\n")]),(0,a._)("div",{class:"line-numbers"},[(0,a._)("span",{class:"line-number"},"1"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"2"),(0,a._)("br")])],-1),we=(0,a._)("p",null,"到目前为止，一切安好。现在，你已将此版本设置为默认版本。",-1),Be=(0,a._)("h3",{id:"白名单",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#白名单","aria-hidden":"true"},"#"),(0,a.Uk)(" 白名单")],-1),ye=(0,a.Uk)("UNIX包含一项安全功能，该功能将可用作 "),Pe={href:"https://docstore.mik.ua/orelly/unix3/upt/ch03_04.htm",target:"_blank",rel:"noopener noreferrer"},We=(0,a.Uk)("login shell"),Oe=(0,a.Uk)("（即登录系统后使用的 shell 程序）的 Shell 程序限制在 “受信任” Shell 程序列表中。这些 Shell 在"),Ge=(0,a._)("code",null,"[/etc/shells](https://bash.cyberciti.biz/guide//etc/shells)",-1),Ie=(0,a.Uk)("文件中列出。"),Ne=(0,a._)("p",null,[(0,a.Uk)("由于你要将新设置的 Bash Shell 用作默认 Shell，因此它必须能够充当登录Shell。这意味着，你必须将其添加到 "),(0,a._)("code",null,"/etc/shells"),(0,a.Uk)(" 文件中。你可以以root用户身份编辑此文件：")],-1),Ce=(0,a._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,a._)("pre",{class:"language-text"},[(0,a._)("code",null,"$ sudo vim /etc/shells\n")]),(0,a._)("div",{class:"line-numbers"},[(0,a._)("span",{class:"line-number"},"1"),(0,a._)("br")])],-1),$e=(0,a._)("p",null,[(0,a.Uk)("并将 "),(0,a._)("code",null,"/usr/local/bin/bash"),(0,a.Uk)(" Shell 添加到其内容中，以便文件看起来像这样：")],-1),Ae=(0,a._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,a._)("pre",{class:"language-text"},[(0,a._)("code",null,"/bin/bash\n/bin/csh\n/bin/ksh\n/bin/sh\n/bin/tcsh\n/bin/zsh\n/usr/local/bin/bash\n")]),(0,a._)("div",{class:"line-numbers"},[(0,a._)("span",{class:"line-number"},"1"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"2"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"3"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"4"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"5"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"6"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"7"),(0,a._)("br")])],-1),Le=(0,a._)("p",null,"这就是这一步需要做的！",-1),Te=(0,a._)("h3",{id:"设置默认-shell",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#设置默认-shell","aria-hidden":"true"},"#"),(0,a.Uk)(" 设置默认 Shell")],-1),Fe=(0,a._)("p",null,[(0,a.Uk)("此时，如果打开一个新的终端窗口，则仍会使用Bash 3.2。这是因为 "),(0,a._)("code",null,"/bin/bash"),(0,a.Uk)(" 仍设置为默认 Shell 程序。要将其更改为新的shell，请执行以下命令：")],-1),He=(0,a._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,a._)("pre",{class:"language-text"},[(0,a._)("code",null,"$ chsh -s /usr/local/bin/bash\n")]),(0,a._)("div",{class:"line-numbers"},[(0,a._)("span",{class:"line-number"},"1"),(0,a._)("br")])],-1),Re=(0,a._)("p",null,"就这样, 现在，当前用户的默认 Shell 程序设置为 Bash 的新版本。如果关闭并重新打开终端窗口，则现在应该已经在使用新版本。你可以如下验证：",-1),ze=(0,a._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,a._)("pre",{class:"language-text"},[(0,a._)("code",null,"$ echo $BASH_VERSION\n5.0.0(1)-release\n")]),(0,a._)("div",{class:"line-numbers"},[(0,a._)("span",{class:"line-number"},"1"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"2"),(0,a._)("br")])],-1),je=(0,a._)("p",null,[(0,a.Uk)("该 "),(0,a._)("code",null,"chsh"),(0,a.Uk)(" 命令仅为执行命令的用户(当前用户)更改默认 Shell 程序。如果你也想更改其他用户的默认 Shell ，则可以通过登录其他用户的身份（例如，使用"),(0,a._)("code",null,"[su](https://en.wikipedia.org/wiki/Su_(Unix))"),(0,a.Uk)("）来重复此命令。最重要的是，也许你可​​能想要更改 root 用户的默认 Shell 程序，你可以执行以下操作：")],-1),Ee=(0,a._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,a._)("pre",{class:"language-text"},[(0,a._)("code",null,"$ sudo chsh -s /usr/local/bin/bash\n")]),(0,a._)("div",{class:"line-numbers"},[(0,a._)("span",{class:"line-number"},"1"),(0,a._)("br")])],-1),Ve=(0,a._)("p",null,[(0,a.Uk)("这样，如果你 "),(0,a._)("code",null,"sudo su"),(0,a.Uk)(" 以 root 用户身份打开 Shell ，它将使用新的 Bash 版本。")],-1),qe=(0,a._)("h2",{id:"重要笔记",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#重要笔记","aria-hidden":"true"},"#"),(0,a.Uk)(" 重要笔记")],-1),Ye=(0,a._)("h3",{id:"脚本中的用法",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#脚本中的用法","aria-hidden":"true"},"#"),(0,a.Uk)(" 脚本中的用法")],-1),De=(0,a._)("p",null,"如前所述，你没有更改 Bash 的默认版本，而是安装了新版本并将其设置为默认版本。Bash的两个版本在你的系统上并存：",-1),Xe=(0,a._)("ul",null,[(0,a._)("li",null,[(0,a._)("code",null,"/bin/bash"),(0,a.Uk)("： 旧版本")]),(0,a._)("li",null,[(0,a._)("code",null,"/usr/local/bin/bash"),(0,a.Uk)("： 新版本")])],-1),Je=(0,a.Uk)("在shell脚本中，你经常会有一个"),Ke={href:"https://en.wikipedia.org/wiki/Shebang_(Unix)",target:"_blank",rel:"noopener noreferrer"},Me=(0,a.Uk)("shebang"),Qe=(0,a.Uk)("行，如以下脚本所示："),Ze=(0,a._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,a._)("pre",{class:"language-text"},[(0,a._)("code",null,"#!/bin/bash\necho $BASH_VERSION\n")]),(0,a._)("div",{class:"line-numbers"},[(0,a._)("span",{class:"line-number"},"1"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"2"),(0,a._)("br")])],-1),el=(0,a._)("p",null,[(0,a.Uk)("请务必注意，该shebang行"),(0,a._)("em",null,"明确"),(0,a.Uk)("引用了Bash 的"),(0,a._)("strong",null,"旧"),(0,a.Uk)("版本（因为它指定了"),(0,a._)("code",null,"/bin/bash"),(0,a.Uk)("）。这意味着，如果你运行此脚本，它将由Bash的旧版本解释（你可以在脚本的输出中看到它，类似于"),(0,a._)("code",null,"3.2.57(1)-release"),(0,a.Uk)("）。")],-1),ll=(0,a._)("p",null,[(0,a.Uk)("在大多数情况下，这可能不是问题。但是，如果你希望脚本由"),(0,a._)("strong",null,"新"),(0,a.Uk)("版本的Bash 显式解释，则可以更改shebang行，如下所示：")],-1),nl=(0,a._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,a._)("pre",{class:"language-text"},[(0,a._)("code",null,"#!/usr/local/bin/bash\necho $BASH_VERSION\n")]),(0,a._)("div",{class:"line-numbers"},[(0,a._)("span",{class:"line-number"},"1"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"2"),(0,a._)("br")])],-1),al=(0,a._)("p",null,[(0,a.Uk)("现在的输出将是"),(0,a._)("code",null,"5.0.0(1)-release"),(0,a.Uk)("。但是，请注意，该解决方案是"),(0,a._)("strong",null,"不可移植的"),(0,a.Uk)("，这意味着它可能无法在其他系统上运行。这是因为，其他系统可能没有位于其中的shell "),(0,a._)("code",null,"/usr/local/bin/bash"),(0,a.Uk)("（而"),(0,a._)("code",null,"/bin/bash"),(0,a.Uk)("这几乎是一个标准）。")],-1),sl=(0,a._)("p",null,"结合两全其美，可以使用以下shebang行：",-1),rl=(0,a._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,a._)("pre",{class:"language-text"},[(0,a._)("code",null,"$ sudo rm /bin/bash\n$ sudo ln -s /usr/local/bin/bash /bin/bash\n")]),(0,a._)("div",{class:"line-numbers"},[(0,a._)("span",{class:"line-number"},"1"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"2"),(0,a._)("br")])],-1),tl=(0,a.Uk)("对于shebang行，这是"),il={href:"https://www.cyberciti.biz/tips/finding-bash-perl-python-portably-using-env.html",target:"_blank",rel:"noopener noreferrer"},_l=(0,a.Uk)("推荐的"),ul=(0,a.Uk)("格式。它通过检查 "),ol=(0,a._)("code",null,"PATH",-1),hl=(0,a.Uk)(" 和使用第一个遇到的 "),cl=(0,a._)("code",null,"bash",-1),bl=(0,a.Uk)(" 可执行文件作为脚本的解释器来工作。如果新版本的目录位于中的旧版本目录"),dl=(0,a._)("code",null,"PATH",-1),pl=(0,a.Uk)("（默认值）之前，则将使用新版本，并且脚本的输出将类似于"),ml=(0,a._)("code",null,"5.0.0(1)-release",-1),gl=(0,a.Uk)("。"),kl=(0,a._)("h3",{id:"为什么不能用符号链接",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#为什么不能用符号链接","aria-hidden":"true"},"#"),(0,a.Uk)(" 为什么不能用符号链接？")],-1),Ul=(0,a._)("p",null,[(0,a.Uk)("为了不处理两个版本的 Bash，你是否能删除旧版本并将新版本放到旧的位置？例如，通过在 "),(0,a._)("code",null,"/bin/bash"),(0,a.Uk)(" 其中创建指向新版本的符号链接，如下所示？")],-1),xl=(0,a._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,a._)("pre",{class:"language-text"},[(0,a._)("code",null,"$ sudo rm /bin/bash\n$ sudo ln -s /usr/local/bin/bash /bin/bash\n")]),(0,a._)("div",{class:"line-numbers"},[(0,a._)("span",{class:"line-number"},"1"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"2"),(0,a._)("br")])],-1),fl=(0,a._)("p",null,[(0,a.Uk)("这样，即使是带有脚本的脚本 "),(0,a._)("code",null,"#!/bin/bash"),(0,a.Uk)(" 也会被新版本的Bash解释，那么为什么不这样做呢？")],-1),vl=(0,a.Uk)("你可以执行此操作，但是你必须避开名为"),Sl={href:"https://developer.apple.com/library/archive/documentation/Security/Conceptual/System_Integrity_Protection_Guide/Introduction/Introduction.html",target:"_blank",rel:"noopener noreferrer"},wl=(0,a._)("strong",null,"系统完整性保护（SIP）",-1),Bl=(0,a.Uk)("** **（"),yl={href:"https://en.wikipedia.org/wiki/System_Integrity_Protection",target:"_blank",rel:"noopener noreferrer"},Pl=(0,a.Uk)("Wikipedia"),Wl=(0,a.Uk)("）的macOS安全功能。此功能甚至禁止 root 用户对某些目录进行写访问（这就是为什么它也称为 “rootless(root 无权限)”）的原因。这些目录在"),Ol={href:"https://developer.apple.com/library/archive/documentation/Security/Conceptual/System_Integrity_Protection_Guide/FileSystemProtections/FileSystemProtections.html",target:"_blank",rel:"noopener noreferrer"},Gl=(0,a.Uk)("这里"),Il=(0,a.Uk)(" 列出并包括 "),Nl=(0,a._)("code",null,"/bin",-1),Cl=(0,a.Uk)(" 。这意味着即使以root用户身份，你也无法执行上述命令，因为不允许你从中删除任何内容或在 "),$l=(0,a._)("code",null,"/bin",-1),Al=(0,a.Uk)(" 中创建任何文件。"),Ll=(0,a.Uk)("解决方法是禁用SIP，在 "),Tl=(0,a._)("code",null,"/bin",-1),Fl=(0,a.Uk)(" 中进行更改，然后再次启用SIP。可以根据"),Hl={href:"https://developer.apple.com/library/archive/documentation/Security/Conceptual/System_Integrity_Protection_Guide/ConfiguringSystemIntegrityProtection/ConfiguringSystemIntegrityProtection.html",target:"_blank",rel:"noopener noreferrer"},Rl=(0,a.Uk)("这里"),zl=(0,a.Uk)("的说明启用和禁用SIP 。它要求你将计算机引导至"),jl=(0,a._)("strong",null,"恢复模式",-1),El=(0,a.Uk)("，然后使用 "),Vl=(0,a._)("code",null,"csrutil disable",-1),ql=(0,a.Uk)(" 和 "),Yl=(0,a._)("code",null,"csrutil enable",-1),Dl=(0,a.Uk)(" 命令。无论你想通过这个 "),Xl=(0,a._)("strong",null,"特别复杂的方式",-1),Jl=(0,a.Uk)(" 来完全替换旧的 Bash 版本，或者是接受同时使用两个Bash版本，则都取决于你。"),Kl=(0,a._)("h2",{id:"参考文献",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#参考文献","aria-hidden":"true"},"#"),(0,a.Uk)(" 参考文献")],-1),Ml={href:"https://apple.stackexchange.com/a/292760",target:"_blank",rel:"noopener noreferrer"},Ql=(0,a.Uk)("https://apple.stackexchange.com/a/292760"),Zl={render:function(e,l){const n=(0,a.up)("OutboundLink");return(0,a.wg)(),(0,a.iD)(a.HY,null,[r,(0,a._)("blockquote",null,[(0,a._)("p",null,[t,(0,a._)("a",i,[_,(0,a.Wm)(n)]),u])]),o,h,c,b,d,(0,a._)("p",null,[p,(0,a._)("a",m,[g,(0,a.Wm)(n)]),k,U,x,f,v,S,w]),(0,a._)("p",null,[B,y,P,(0,a._)("a",W,[O,(0,a.Wm)(n)]),G,(0,a._)("a",I,[N,(0,a.Wm)(n)]),C,(0,a._)("a",$,[A,(0,a.Wm)(n)]),L,(0,a._)("a",T,[F,(0,a.Wm)(n)]),H]),(0,a._)("p",null,[R,(0,a._)("a",z,[j,(0,a.Wm)(n)]),E]),V,(0,a._)("p",null,[q,(0,a._)("a",Y,[D,(0,a.Wm)(n)]),X,J,K,M,Q]),Z,ee,le,(0,a._)("p",null,[ne,(0,a._)("a",ae,[se,(0,a.Wm)(n)]),re]),te,ie,_e,ue,oe,he,(0,a._)("p",null,[ce,(0,a._)("a",be,[de,(0,a.Wm)(n)]),pe]),me,ge,ke,Ue,xe,fe,ve,Se,we,Be,(0,a._)("p",null,[ye,(0,a._)("a",Pe,[We,(0,a.Wm)(n)]),Oe,Ge,Ie]),Ne,Ce,$e,Ae,Le,Te,Fe,He,Re,ze,je,Ee,Ve,qe,Ye,De,Xe,(0,a._)("p",null,[Je,(0,a._)("a",Ke,[Me,(0,a.Wm)(n)]),Qe]),Ze,el,ll,nl,al,sl,rl,(0,a._)("p",null,[tl,(0,a._)("a",il,[_l,(0,a.Wm)(n)]),ul,ol,hl,cl,bl,dl,pl,ml,gl]),kl,Ul,xl,fl,(0,a._)("p",null,[vl,(0,a._)("a",Sl,[wl,(0,a.Wm)(n)]),Bl,(0,a._)("a",yl,[Pl,(0,a.Wm)(n)]),Wl,(0,a._)("a",Ol,[Gl,(0,a.Wm)(n)]),Il,Nl,Cl,$l,Al]),(0,a._)("p",null,[Ll,Tl,Fl,(0,a._)("a",Hl,[Rl,(0,a.Wm)(n)]),zl,jl,El,Vl,ql,Yl,Dl,Xl,Jl]),Kl,(0,a._)("ul",null,[(0,a._)("li",null,[(0,a._)("a",Ml,[Ql,(0,a.Wm)(n)])])])],64)}}},9913:(e,l,n)=>{e.exports=n.p+"assets/img/15821298484903.05cc019c.jpg"}}]);