"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6467],{2096:(e,n,s)=>{s.r(n),s.d(n,{data:()=>l});const l={key:"v-7ff60908",path:"/os/centos/install-redis5.html",title:"[译] 在 CentOS 7 上安装和配置 Redis 5.x",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"先决条件",slug:"先决条件",children:[]},{level:2,title:"在CentOS 7上安装Redis",slug:"在centos-7上安装redis",children:[]},{level:2,title:"配置Redis远程访问",slug:"配置redis远程访问",children:[]},{level:2,title:"结论",slug:"结论",children:[]}],filePathRelative:"os/centos/install-redis5.md",git:{updatedTime:1629648513e3,contributors:[{name:"duoli",email:"zhaody901@126.com",commits:1}]}}},9802:(e,n,s)=>{s.r(n),s.d(n,{default:()=>he});var l=s(6252),r=s(8142);const a=(0,l._)("h1",{id:"译-在-centos-7-上安装和配置-redis-5-x",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#译-在-centos-7-上安装和配置-redis-5-x","aria-hidden":"true"},"#"),(0,l.Uk)(" [译] 在 CentOS 7 上安装和配置 Redis 5.x")],-1),i=(0,l.Uk)("原文地址 : "),t={href:"https://linuxize.com/post/how-to-install-and-configure-redis-on-centos-7/",target:"_blank",rel:"noopener noreferrer"},d=(0,l.Uk)("How to Install and Configure Redis on CentOS 7"),u=(0,l._)("p",null,[(0,l._)("img",{src:r,alt:""})],-1),_=(0,l._)("p",null,"Redis是一个开源的内存型数据库。它可以用作数据库，缓存或消息代理，并支持各种数据结构，例如字符串，哈希，列表，集合等。Redis 通过 Redis Sentinel 提供高可用性，包括监视，通知，自动故障转移。它还使用 Redis Cluster 在多个 Redis 节点之间提供自动分区。",-1),c=(0,l._)("p",null,"本教程说明了如何在 CentOS 7 服务器上安装和配置 Redis。",-1),o=(0,l._)("h2",{id:"先决条件",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#先决条件","aria-hidden":"true"},"#"),(0,l.Uk)(" 先决条件")],-1),m=(0,l.Uk)("在开始本教程之前，请确保您以"),p={href:"https://linuxize.com/post/create-a-sudo-user-on-centos/",target:"_blank",rel:"noopener noreferrer"},b=(0,l.Uk)("user with sudo privileges"),g=(0,l.Uk)("的身份登录。"),x=(0,l._)("h2",{id:"在centos-7上安装redis",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#在centos-7上安装redis","aria-hidden":"true"},"#"),(0,l.Uk)(" 在CentOS 7上安装Redis")],-1),h=(0,l._)("p",null,"Redis最新版软件包不包含在默认的 CentOS Repo 中。我们将从 Remi 源安装 Redis 5.x 版。",-1),k=(0,l._)("p",null,"安装非常简单，只需执行以下步骤：",-1),v=(0,l._)("p",null,"1). 首先在SSH终端中运行以下命令来启用 Remi 存储库：",-1),R=(0,l._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,l._)("pre",{class:"language-text"},[(0,l._)("code",null,"$ yum install epel-release yum-utils\n$ yum install http://rpms.remirepo.net/enterprise/remi-release-7.rpm\n$ yum-config-manager --enable remi\n")]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br")])],-1),U=(0,l._)("p",null,"2). 通过键入以下命令安装Redis软件包：",-1),f=(0,l._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,l._)("pre",{class:"language-text"},[(0,l._)("code",null,"$ yum install redis\n")]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br")])],-1),S=(0,l._)("p",null,"3). 安装完成后，启动 Redis 服务并启用以下命令使其在启动时自动启动：",-1),y=(0,l._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,l._)("pre",{class:"language-text"},[(0,l._)("code",null,"$ systemctl start redis\n$ sudo systemctl enable redis\nCreated symlink from /etc/systemd/system/multi-user.target.wants/redis.service to /usr/lib/systemd/system/redis.service.\n")]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br")])],-1),C=(0,l._)("p",null,"要检查服务的状态，请输入以下命令：",-1),O=(0,l._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,l._)("pre",{class:"language-text"},[(0,l._)("code",null,"$ systemctl status redis\n")]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br")])],-1),w=(0,l._)("p",null,"应该看到类似以下的内容：",-1),I=(0,l._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,l._)("pre",{class:"language-text"},[(0,l._)("code",null,"● redis.service - Redis persistent key-value database\nLoaded: loaded (/usr/lib/systemd/system/redis.service; enabled; vendor preset: disabled)\nDrop-In: /etc/systemd/system/redis.service.d\n        └─limit.conf\nActive: active (running) since Sat 2018-11-24 15:21:55 PST; 40s ago\nMain PID: 2157 (redis-server)\nCGroup: /system.slice/redis.service\n        └─2157 /usr/bin/redis-server 127.0.0.1:6379\n")]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"7"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"8"),(0,l._)("br")])],-1),T=(0,l._)("blockquote",null,[(0,l._)("p",null,"如果服务器上禁用了IPv6，则 Redis 服务将无法启动。")],-1),E=(0,l._)("p",null,"恭喜，这时已经在 CentOS 7 服务器上安装并运行了 Redis。",-1),$=(0,l._)("h2",{id:"配置redis远程访问",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#配置redis远程访问","aria-hidden":"true"},"#"),(0,l.Uk)(" 配置Redis远程访问")],-1),N=(0,l._)("p",null,"默认情况下，Redis不允许远程连接。只能从运行 Redis 的计算机 127.0.0.1 （localhost） 连接到Redis服务器。",-1),P=(0,l._)("p",null,"仅当你要从远程主机连接到 Redis 服务器时，才执行以下步骤。如果使用单个服务器设置，并且应用程序和Redis在同一台计算机上运行，​​则不应启用远程访问。",-1),z=(0,l._)("p",null,"要将Redis配置为接受远程连接，请使用文本编辑器打开Redis配置文件：",-1),L=(0,l._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,l._)("pre",{class:"language-text"},[(0,l._)("code",null,"$ vim /etc/redis.conf\n")]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br")])],-1),A=(0,l._)("p",null,[(0,l.Uk)("找到以开头的行，"),(0,l._)("code",null,"bind 127.0.0.1"),(0,l.Uk)(" 然后在后面添加服务器专用IP地址 "),(0,l._)("code",null,"127.0.0.1"),(0,l.Uk)("。")],-1),D=(0,l._)("p",null,[(0,l._)("strong",null,"/etc/redis.conf")],-1),W=(0,l._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,l._)("pre",{class:"language-text"},[(0,l._)("code",null,"# IF YOU ARE SURE YOU WANT YOUR INSTANCE TO LISTEN TO ALL THE INTERFACES\n# JUST COMMENT THE FOLLOWING LINE.\n# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nbind 127.0.0.1 192.168.121.233\n")]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br")])],-1),H=(0,l._)("p",null,[(0,l._)("code",null,"192.168.121.233"),(0,l.Uk)(" 替换为你的地址。保存文件并关闭编辑器。")],-1),F=(0,l._)("p",null,"重新启动 Redis 服务以使更改生效：",-1),G=(0,l._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,l._)("pre",{class:"language-text"},[(0,l._)("code",null,"$ systemctl restart redis\n")]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br")])],-1),Y=(0,l.Uk)("使用以下"),M=(0,l._)("code",null,"ss",-1),j=(0,l.Uk)("命令来验证Redis服务器正在 "),q={href:"https://linuxize.com/post/check-listening-ports-linux/",target:"_blank",rel:"noopener noreferrer"},J=(0,l.Uk)("监听"),B=(0,l.Uk)(" 的端口 "),K=(0,l._)("code",null,"6379",-1),Q=(0,l.Uk)("："),V=(0,l._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,l._)("pre",{class:"language-text"},[(0,l._)("code",null,"$ ss -an | grep 6379\ntcp    LISTEN     0      128    192.168.121.233:6379            *:*\ntcp    LISTEN     0      128    127.0.0.1:6379                  *:*\n")]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br")])],-1),X=(0,l._)("p",null,[(0,l.Uk)("接下来，需要添加防火墙规则，以启用来自远程计算机上 TCP 端口上的访问 "),(0,l._)("code",null,"6379"),(0,l.Uk)("。")],-1),Z=(0,l.Uk)("假设正在使用"),ee={href:"https://linuxize.com/post/how-to-setup-a-firewall-with-firewalld-on-centos-7/",target:"_blank",rel:"noopener noreferrer"},ne=(0,l._)("code",null,"FirewallD",-1),se=(0,l.Uk)(" 防火墙来管理防火墙，并且希望允许从"),le=(0,l._)("code",null,"192.168.121.0/24",-1),re=(0,l.Uk)("子网进行访问，则可以运行以下命令："),ae=(0,l._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,l._)("pre",{class:"language-text"},[(0,l._)("code",null,"$ firewall-cmd --new-zone=redis --permanent\n$ firewall-cmd --zone=redis --add-port=6379/tcp --permanent\n$ firewall-cmd --zone=redis --add-source=192.168.121.0/24 --permanent\n$ firewall-cmd --reload\n")]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br")])],-1),ie=(0,l._)("p",null,[(0,l.Uk)("上面的命令创建一个名为 "),(0,l._)("code",null,"redis"),(0,l.Uk)(" 的新 zone，打开端口 "),(0,l._)("code",null,"6379"),(0,l.Uk)(" 并允许从专用网络进行访问。")],-1),te=(0,l._)("p",null,"此时，Redis 服务器将接受TCP端口 6379 上的远程连接。",-1),de=(0,l._)("p",null,"确保将防火墙配置为仅接受来自受信任IP范围的连接。",-1),ue=(0,l._)("p",null,[(0,l.Uk)("要验证所有设置是否正确，您可以尝试使用 "),(0,l._)("code",null,"redis-cli"),(0,l.Uk)(" 实用程序向远程计算机ping Redis服务器，该实用程序为Redis服务器提供命令行界面：")],-1),_e=(0,l._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,l._)("pre",{class:"language-text"},[(0,l._)("code",null,"redis-cli -h <REDIS_IP_ADDRESS> ping\n")]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br")])],-1),ce=(0,l._)("p",null,[(0,l.Uk)("该命令应返回以下响应"),(0,l._)("code",null,"PONG"),(0,l.Uk)("：")],-1),oe=(0,l._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,l._)("pre",{class:"language-text"},[(0,l._)("code",null,"PONG\n")]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br")])],-1),me=(0,l._)("h2",{id:"结论",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#结论","aria-hidden":"true"},"#"),(0,l.Uk)(" 结论")],-1),pe=(0,l.Uk)("恭喜你已经在 CentOS 7 服务器上成功安装了 Redis。要了解有关如何使用 Redis 的更多信息，请访问其官方"),be={href:"https://redis.io/documentation",target:"_blank",rel:"noopener noreferrer"},ge=(0,l.Uk)("文档"),xe=(0,l.Uk)("。"),he={render:function(e,n){const s=(0,l.up)("OutboundLink");return(0,l.wg)(),(0,l.iD)(l.HY,null,[a,(0,l._)("p",null,[i,(0,l._)("a",t,[d,(0,l.Wm)(s)])]),u,_,c,o,(0,l._)("p",null,[m,(0,l._)("a",p,[b,(0,l.Wm)(s)]),g]),x,h,k,v,R,U,f,S,y,C,O,w,I,T,E,$,N,P,z,L,A,D,W,H,F,G,(0,l._)("p",null,[Y,M,j,(0,l._)("a",q,[J,(0,l.Wm)(s)]),B,K,Q]),V,X,(0,l._)("p",null,[Z,(0,l._)("a",ee,[ne,(0,l.Wm)(s)]),se,le,re]),ae,ie,te,de,ue,_e,ce,oe,me,(0,l._)("p",null,[pe,(0,l._)("a",be,[ge,(0,l.Wm)(s)]),xe])],64)}}},8142:(e,n,s)=>{e.exports=s.p+"assets/img/15817918597723.0eebe273.jpg"}}]);