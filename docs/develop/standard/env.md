# 环境

## 开发环境

对于环境, 项目开发分为 local, test, develop, pre, production

**local(本地开发)**

开发者部署在本机, 数据库共用 test 服务器数据库, 本地环境配置为 local

**test(本地测试)**

开发者代码合并并提交到 test 服务器, 供前端/测试在开发过程中进行联合调试和部分测试工作, 为了避免因为环境不一致导致的数据一致性问题, 用户 ID 起始为 1, 用户名默认前缀为 test

**develop(正式测试/dev 环境)**

开发者将开发内容开发完毕之后将开发内容部署到 dev 环境, 供测试进行测试, dev 环境数据库在测试过程中保持结构和 test 环境一致, 为了避免数据一致性导致的问题, 用户起始 ID 为 50000, 用户名默认前缀为 develop

**pre(预发环境)**

此环境和线上环境使用同样数据库, 主要为了验证版本之间的兼容性和数据一致性问题

**production(线上/生产环境)**

线上环境, 独立数据库, 运维进行数据管理, 生产环境用户 ID 应该从 100000 开始, 避免数据一致导致的问题

## 变量

对于使用 `#` 进行注释的分组, 我们建议使用如下样式进行分组, 例如 `.env` 文件, `nginx.conf` 配置文件

```env
# Database
# -----------------------------------------
DB_HOST=127.0.0.1
DB_DATABASE=db-name
DB_USERNAME=db-user
DB_PASSWORD=db-password
```

## nginx 环境配置

### 上传图片的大小约定

上传图片应当服务端 / 客户端均进行统一的大小限制, 所需要的结果是

1. 无法选择(提示超限)
2. 提交到服务端之后客户端根据错误码进行正确的错误提示, 客户端做二次保障

## QA

**数据一致性导致的问题**

数据一致性导致的问题一般为对接的三方数据, 未提供开发环境, 我们再对接的过程中, 使用真实的数据和三方进行对接, 但对方仅仅使用我们提供的用户 ID 值作为唯一识别值, 这样相同的 ID 在使用的过程中会出现混淆的问题, 未避免此问题可以将各环境的 ID 进行下区分
